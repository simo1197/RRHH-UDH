/* ===========================
   Sidebar.css (CON CORRECCIONES)
   Reemplaza todo el archivo por este
   =========================== */

/* -------------------- Variables de color -------------------- */
:root {
  --primary-color: #facd04;
  --secondary-color: #2c3e50; /* fondo sidebar */
  --background-color: #fff;
  --text-color: #0c0c0c;      /* por defecto texto sobre fondo oscuro */
  --hover-color: #45a049;
  --sidebar-width: 250px;
  --sidebar-collapsed-width: 70px;
  --icon-slot: 60px;
  --submenu-bg: transparent;
  --submenu-hover: rgba(255,255,255,0.06);
}

/* -------------------- Sidebar -------------------- */
.sidebar {
  background-color: #ffffff; /* fondo blanco */
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: var(--sidebar-width);
  transition: width 0.3s ease, background 0.25s ease;
  padding: 10px;
  box-sizing: border-box;
  overflow: hidden;
  overflow: visible;
  display: flex;
  flex-direction: column;
  z-index: 1100;
}

.sidebar.collapsed {
  width: var(--sidebar-collapsed-width);
}

/* -------------------- Header con logo -------------------- */
.sidebar header {
  position: relative;            /* REFERENCIA para posicionar .toggle */
  display: flex;
  align-items: center;
  gap: 8px;
  padding-right: 8px;            /* espacio para el toggle */
}

.sidebar header .image-text {
  display: flex;
  align-items: center;
  gap: 8px;
}

.sidebar header img {
  width: 40px;
  height: 40px;
  border-radius: 6px;
}

.sidebar header .direccion {
  font-size: 16px;
  font-weight: bold;
  color: var(--text-color);
}

.sidebar.collapsed header .direccion {
  display: none;
}

/* -------------------- Botón toggle (colapsar/expandir) -------------------- */
.sidebar header .toggle {
  position: absolute;
  top: 50%;
  right: -5px;                   /* visible ligeramente fuera del contenedor */
  transform: translateY(-50%);
  background: var(--primary-color);
  border-radius: 50%;
  cursor: pointer;
  font-size: 16px;
  color: #f7f7f5;
  padding: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: right 0.18s ease, transform 0.18s ease;
  z-index: 1100;
}

/* Al colapsar, desplazar ligeramente MÁS a la derecha (solo un poquito) */
.sidebar.collapsed header .toggle {
  right: -25px !important;        /* pequeño ajuste para que no tape el logo */
  transform: translateY(-50%) scale(0.95);
}

/* -------------------- Menú principal (estructura, scroll y gap) -------------------- */
.menu-bar {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;
  overflow: hidden;
  box-sizing: border-box;
}

/* Zona que hace scroll (lista de items) */
.menu {
  overflow-y: auto;
  padding-right: 8px;            /* dejar espacio para el scrollbar */
  box-sizing: border-box;
  max-height: calc(100vh - 180px); /* altura para evitar solapar header/pie (ajustable) */
}

/* Lista principal: mayor separación (interlineado) para llenar el hueco) */
.menu-links {
  display: flex;
  flex-direction: column;
  gap: 30px;                    /* + espacio entre items principales */
  margin: 0;
  padding: 22px 0;              /* separa del header y del pie */
  list-style: none;
  box-sizing: border-box;
}

/* Cada item padre (envoltura) */
.menu-item {
  width: 100%;
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

/* La línea clicable del item (icono + texto + flecha) */
.nav-links {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 14px 12px;          /* padding aumentado para dar "peso" visual */
  cursor: pointer;
  user-select: none;
  box-sizing: border-box;
  transition: background 0.28s ease, color 0.2s ease; /* restaurar animación hover */
}

/* Hover animado */
.nav-links:hover {
  background: var(--submenu-hover);
  border-radius: 6px;
}

/* Icono reserva */
.sidebar.collapsed .nav-links .icon {
  min-width: 0;          /* elimina el ancho extra */
  justify-content: center; /* centra el icono */
  width: 100%;            /* ocupa todo el ancho disponible */
}



/* Texto del item principal */
.text.nav-text {
  color: var(--text-color);
  font-size: 15px;
  font-weight: 600;
  transition: opacity 0.2s ease;
}

/* ocultar texto al colapsar */
.sidebar.collapsed .text.nav-text {
  opacity: 0;
  pointer-events: none;
}

/* Flecha al final del item */
.nav-links .arrow {
  margin-left: auto;
  transition: transform 0.22s ease;
}

/* rueda la flecha cuando el padre tiene clase open (JSX la marca) */
.menu-item.open .nav-links .arrow {
  transform: rotate(180deg);
}

/* -------------------- Submenús (acordeón hacia abajo dentro del flujo) -------------------- */
.submenu {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.32s ease, padding 0.22s ease;
  margin: 0;
  padding: 0 12px;
  box-sizing: border-box;
  background: var(--submenu-bg);
  display: flex;
  flex-direction: column;
  gap: 6px;
}

/* abierto */
.submenu.open {
  max-height: 420px;
  padding-top: 8px;
  padding-bottom: 8px;
}

/* items del submenú */
.submenu li {
  list-style: none;
  padding: 6px 0;
}

/* enlaces del submenú */
.submenu li a {
  display: block;
  width: 100%;
  padding: 6px 10px;
  color: var(--text-color);
  text-decoration: none;
  border-radius: 6px;
  transition: background 0.2s ease;
  font-weight: bold; 
}

/* hover del submenú */
.submenu li a:hover {
  background: var(--submenu-hover);
}

/* -------------------- Bottom (Salir + Modo Noche) -------------------- */
.bottom-content {
  margin-top: auto;
  padding: 20px 10px 26px 10px; /* subimos el bloque y damos espacio inferior */
  box-sizing: border-box;
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* logout y mode distribuidos correctamente */
.bottom-content .logout,
.bottom-content .mode {
  display: flex;
  align-items: center;
  justify-content: space-between; /* icono+texto left, switch right */
  gap: 8px;
}

/* link 'Salir' clicable en todo su ancho */
.bottom-content .logout a {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  text-decoration: none;
  color: var(--text-color);
  padding: 6px 8px;
}

/* mode - icono + texto y switch */
.mode {
  position: relative;         /* para poder posicionar el toggle */
  display: flex;
  align-items: center;        /* centra verticalmente */
  padding-right: 0;
}


/* switch */ 
.toggle-switch {
  margin-left: 0;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  padding: 0;
  z-index: 1200;
}

/* visual switch */
.toggle-switch .switch {
  position: relative;
  width: 40px;
  height: 20px;
  border-radius: 20px;
  background: #ddd;
  transition: all 0.22s ease;
}

/* knob inside */
.toggle-switch .switch::before {
  content: "";
  position: absolute;
  top: 50%;
  left: 3px;
  transform: translateY(-50%);
  width: 14px;
  height: 14px;
  background: #fff;
  border-radius: 50%;
  transition: left 0.22s ease;
}

/* dark-mode visual: mover knob y cambiar fondo */
body.dark-mode .toggle-switch .switch {
  background: #3b8b3b;
}
body.dark-mode .toggle-switch .switch::before {
  left: 23px;
}

/* -------------------- Modo oscuro (colores) -------------------- */
body.dark-mode {
  background: #0b0b0b;
}

body.dark-mode .sidebar {
  background: #121212;
}

body.dark-mode .text.nav-text,
body.dark-mode .bottom-content .logout a,
body.dark-mode .submenu li a {
  color: #ffffff;
}

/* -------------------- Fallbacks / Reset para reglas antiguas -------------------- */
.sidebar li {
  margin-top: 0 !important;
  height: auto !important;
  padding: 0 !important;
}

/* scrollbar styling optional */
.menu::-webkit-scrollbar { width: 8px; }
.menu::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.06); border-radius: 8px; }

/* Iconos blancos en modo noche */
body.dark-mode .nav-links .icon {
  color: #ffffff;
  border-color: #ffffff; /* si quieres que el borde también sea blanco */
}
/* Sidebar expandido: scroll horizontal automático si es necesario */
.sidebar:not(.collapsed) .menu {
  overflow-x: auto;  /* horizontal habilitado */
}

/* Sidebar colapsado: ocultar scroll horizontal */
.sidebar.collapsed .menu {
  overflow-x: hidden; /* deshabilitado */
}
/* Título "Recursos Humanos" en modo noche */
body.dark-mode .direccion {
  color: #ffffff;
}
/* Contenedor principal del modo noche */

/* Contenedor del icono + texto */
.mode .moon-sun {
  display: flex;
  align-items: center;        /* centra icono y texto verticalmente */
  gap: 6px;                   /* espacio pequeño entre icono y texto */
}

/* Toggle a la derecha */
.mode .toggle-switch {
  position: absolute;
  left: 100px;                   /* pegado al borde derecho */
  top: 50%;
  transform: translateY(-50%);
  padding: 0;
  margin: 0;
}

/* Texto e icono en modo noche */
body.dark-mode .moon-sun {
  color: #ffffff;   /* blanco */
  font-weight: bold; /* negrita */
}

/* Flechas por defecto (modo día) */
.arrow {
  color: #000000; /* negras en modo día */
  transition: color 0.3s ease;
}

/* Flechas en modo noche */
body.dark-mode .arrow {
  color: #FFD700; /* dorado */
}
/* Estilo base del menú */
.menu-item {
  padding: 10px 14px;
  border-radius: 8px;
  transition: all 0.3s ease;
  border: 2px solid transparent; /* borde transparente por defecto */
}

/* Hover en modo día */
.menu-item:hover {
  background-color: rgba(255, 215, 0, 0.1);
  border: 2px solid #FFD700; /* borde dorado brillante */
  box-shadow: 0 0 12px rgba(255, 215, 0, 0.9); /* brillo fuerte */
  cursor: pointer;
}

/* Hover en modo noche */
body.dark-mode .menu-item:hover {
  background-color: rgba(255, 215, 0, 0.2);
  border: 2px solid #FFD700; /* borde dorado brillante */
  box-shadow: 0 0 16px rgba(255, 215, 0, 1); /* brillo más intenso */
}
/* Ocultar texto y centrar el ícono cuando el sidebar está colapsado */
.sidebar.collapsed .mode .mode-text {
  display: none;
}

.sidebar.collapsed .mode .moon-sun {
  justify-content: center;
  width: 100%;
}
/* ======= FORZAR CIERRE DE SUBMENÚS CUANDO EL SIDEBAR ESTÁ COLAPSADO =======
   Pegar al final de Sidebar.css
   - Cubre varios nombres donde podría estar la clase "collapsed" (.sidebar, .nav, .wrapper, #sidebar, .sidenav, .app-sidebar)
   - Anula display / altura / visibilidad / pointer-events con !important
   - Restaura comportamiento normal cuando NO está colapsado
*/

/* 1) Nombre posibles del contenedor que recibe .collapsed */
:is(.sidebar, .nav, .wrapper, #sidebar, .sidenav, .app-sidebar, .layout-sidebar).collapsed {

  /* 2) Ocultar listas internas comunes */
  /* > ul y cualquier contenedor típico (.submenu-list, .submenu-body) */
  --hide-selectors: ".submenu > ul, .submenu .submenu-list, .submenu .submenu-body, .submenu .children";
}

/* 3) Reglas efectivas (prácticas): */
:is(.sidebar, .nav, .wrapper, #sidebar, .sidenav, .app-sidebar, .layout-sidebar).collapsed
  .submenu > ul,
:is(.sidebar, .nav, .wrapper, #sidebar, .sidenav, .app-sidebar, .layout-sidebar).collapsed
  .submenu .submenu-list,
:is(.sidebar, .nav, .wrapper, #sidebar, .sidenav, .app-sidebar, .layout-sidebar).collapsed
  .submenu .submenu-body,
:is(.sidebar, .nav, .wrapper, #sidebar, .sidenav, .app-sidebar, .layout-sidebar).collapsed
  .submenu .children,
:is(.sidebar, .nav, .wrapper, #sidebar, .sidenav, .app-sidebar, .layout-sidebar).collapsed
  .submenu[aria-expanded="true"] > ul,
:is(.sidebar, .nav, .wrapper, #sidebar, .sidenav, .app-sidebar, .layout-sidebar).collapsed
  [data-open="true"] > .submenu,
:is(.sidebar, .nav, .wrapper, #sidebar, .sidenav, .app-sidebar, .layout-sidebar).collapsed
  [data-open="true"] > .submenu > ul
{
  display: none !important;
  max-height: 0 !important;
  height: 0 !important;
  opacity: 0 !important;
  visibility: hidden !important;
  pointer-events: none !important;
  transform: translateY(-6px) !important;
  transition: none !important;
}

/* 4) Si tu submenu se "teleporta" (appendTo body) y tiene clase .submenu-popup o .submenu-flyout */
:is(.sidebar, .nav, .wrapper, #sidebar, .sidenav, .app-sidebar, .layout-sidebar).collapsed ~ .submenu-popup,
:is(.sidebar, .nav, .wrapper, #sidebar, .sidenav, .app-sidebar, .layout-sidebar).collapsed .submenu-popup,
body:is(.sidebar-collapsed, .nav-collapsed, .collapsed) .submenu-popup,
:is(.sidebar, .nav, .wrapper, #sidebar, .sidenav, .app-sidebar, .layout-sidebar).collapsed
  .submenu-flyout,
body:is(.sidebar-collapsed, .nav-collapsed, .collapsed) .submenu-flyout {
  display: none !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

/* 5) Restaurar comportamiento normal cuando NO está colapsado (evita efectos colaterales) */
:is(.sidebar, .nav, .wrapper, #sidebar, .sidenav, .app-sidebar, .layout-sidebar):not(.collapsed)
  .submenu > ul,
:is(.sidebar, .nav, .wrapper, #sidebar, .sidenav, .app-sidebar, .layout-sidebar):not(.collapsed)
  .submenu .submenu-list,
:is(.sidebar, .nav, .wrapper, #sidebar, .sidenav, .app-sidebar, .layout-sidebar):not(.collapsed)
  .submenu.open > ul,
:is(.sidebar, .nav, .wrapper, #sidebar, .sidenav, .app-sidebar, .layout-sidebar):not(.collapsed)
  .submenu[aria-expanded="true"] > ul {
  display: block !important;
  max-height: 9999px !important;
  height: auto !important;
  opacity: 1 !important;
  visibility: visible !important;
  pointer-events: auto !important;
  transform: none !important;
  transition: max-height .28s ease, opacity .18s ease;
}

/* ---------- Debug helpers (opcional) ----------
   Quitar o comentar si no quieres outlines/diagnóstico visual.
   Activa para ver dónde está la clase .collapsed y qué .submenu existen.
*/
.sidebar.debug-outline, .nav.debug-outline, #sidebar.debug-outline {
  outline: 2px dashed rgba(255,0,0,0.25);
}
.submenu.debug-outline { outline: 1px dashed rgba(0,120,255,0.20); }




/* =========================== END =========================== */